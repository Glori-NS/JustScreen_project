{% extends 'base.html' %}

{% block content %}
<h2>Recruiter Dashboard</h2>

<!-- Manage Job Postings Section -->
<div class="my-4">
    <h4>Manage Job Postings</h4>
    <a href="{% url 'create_job' %}" class="btn btn-primary mb-3">Create New Job Posting</a>
    
    {% if job_posts %}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Job Title</th>
                <th>Description</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for job in job_posts %}
            <tr>
                <td>{{ job.title }}</td>
                <td>{{ job.description|truncatewords:15 }}</td>
                <td>
                    <a href="{% url 'edit_job' job.id %}" class="btn btn-warning btn-sm">Edit</a>
                    <a href="{% url 'delete_job' job.id %}" class="btn btn-danger btn-sm">Delete</a>
                    <a href="{% url 'job_detail' job.id %}" class="btn btn-info btn-sm">View</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>You haven't posted any jobs yet.</p>
    {% endif %}
</div>

<!-- Review Applications Section -->
<div class="my-4">
    <h4>Review Applications</h4>

    {% if applications %}
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Job Title</th>
                <th>Candidate</th>
                <th>Application Date</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for application in applications %}
            <tr>
                <td>{{ application.job_post.title }}</td>
                <td>{{ application.candidate.name }}</td>
                <td>{{ application.application_date|date:"d M Y" }}</td>
                <td>
                    <!-- Again, adjust this as per your model's fields -->
                    {% if application.status == "accepted" %}
                    <span class="badge badge-success">Accepted</span>
                    {% elif application.status == "rejected" %}
                    <span class="badge badge-danger">Rejected</span>
                    {% else %}
                    <span class="badge badge-secondary">Pending</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'view_application' application.id %}" class="btn btn-info btn-sm">View</a>
                    <!-- Add other actions as needed, e.g., 'Accept', 'Reject' -->
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No applications to review at this time.</p>
    {% endif %}
</div>

{% endblock %}
